<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Plot Pioneers - Athira, Priyarsha, Shalon, Chethana">

<title>Plot Pioneers - World Happiness Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Plot Pioneers</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html" rel="" target="">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html" rel="" target="">
 <span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/INFO526-DataViz/project-final-Plot-Pioneers" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a>
  <ul class="collapse">
  <li><a href="#data-cleaning-code" id="toc-data-cleaning-code" class="nav-link" data-scroll-target="#data-cleaning-code">Data Cleaning code:</a></li>
  </ul></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#question-1-aspects-influencing-well-being-over-time." id="toc-question-1-aspects-influencing-well-being-over-time." class="nav-link" data-scroll-target="#question-1-aspects-influencing-well-being-over-time.">Question 1: Aspects influencing well-being over time.</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1">Introduction</a>
  <ul class="collapse">
  <li><a href="#how-do-various-factors-impact-the-overall-happiness-score-across-different-countries-over-the-years" id="toc-how-do-various-factors-impact-the-overall-happiness-score-across-different-countries-over-the-years" class="nav-link" data-scroll-target="#how-do-various-factors-impact-the-overall-happiness-score-across-different-countries-over-the-years">How do various factors impact the overall happiness score across different countries over the years?</a></li>
  </ul></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach">Approach</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul></li>
  <li><a href="#question-2-patterns-of-change-in-happiness-scores-related-to-global-events." id="toc-question-2-patterns-of-change-in-happiness-scores-related-to-global-events." class="nav-link" data-scroll-target="#question-2-patterns-of-change-in-happiness-scores-related-to-global-events.">Question 2: Patterns of change in happiness scores related to global events.</a>
  <ul class="collapse">
  <li><a href="#major-events-affecting-happiness-scores-2015-2023" id="toc-major-events-affecting-happiness-scores-2015-2023" class="nav-link" data-scroll-target="#major-events-affecting-happiness-scores-2015-2023">Major Events Affecting Happiness Scores (2015-2023):</a>
  <ul class="collapse">
  <li><a href="#brexit-vote" id="toc-brexit-vote" class="nav-link" data-scroll-target="#brexit-vote">2016 Brexit Vote:</a></li>
  <li><a href="#us-china-trade-war" id="toc-us-china-trade-war" class="nav-link" data-scroll-target="#us-china-trade-war">2017-2018 US-China Trade War:</a></li>
  <li><a href="#covid-19-pandemic" id="toc-covid-19-pandemic" class="nav-link" data-scroll-target="#covid-19-pandemic">2019-2023 COVID-19 Pandemic:</a></li>
  <li><a href="#pakistan-floods" id="toc-pakistan-floods" class="nav-link" data-scroll-target="#pakistan-floods">2022 Pakistan Floods:</a></li>
  </ul></li>
  <li><a href="#miscellaneous-plots" id="toc-miscellaneous-plots" class="nav-link" data-scroll-target="#miscellaneous-plots">Miscellaneous Plots:</a>
  <ul class="collapse">
  <li><a href="#world-heatmap" id="toc-world-heatmap" class="nav-link" data-scroll-target="#world-heatmap">World Heatmap:</a></li>
  <li><a href="#trend-comparison" id="toc-trend-comparison" class="nav-link" data-scroll-target="#trend-comparison">Trend Comparison:</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">World Happiness Report</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">A Journey through World Happiness:)</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Plot Pioneers - Athira, Priyarsha, Shalon, Chethana </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
<p>This project focuses on developing an interactive Shiny application to transform the intricate data from the World Happiness Report into an accessible and engaging platform for a diverse audience. While the report offers valuable insights into the happiness and well-being of individuals across countries, the complexity of the data often poses challenges in interpretation. Our objective is to simplify this process by creating an intuitive and user-friendly app that dynamically visualizes the data. The driving force behind our initiative is to bridge the gap between the richness of complex data and end-users seeking comprehension.</p>
<section id="data-cleaning-code" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning-code">Data Cleaning code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df_2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2015.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>df_2016 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2016.csv"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>df_2017 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2017.csv"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df_2018 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2018.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df_2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2019.csv"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>df_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2020.csv"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df_2021 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2021.csv"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>df_2022 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2022.csv"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>df_2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2023.csv"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2015)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2016)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2017)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2018)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2019)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2020)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2021)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2022)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2023)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#2015</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Read CSV files and import into dataframes</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>file_1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2015.csv"</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>happiness_2015_df <span class="ot">&lt;-</span> file_1</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>happiness_2015_df <span class="ot">&lt;-</span> happiness_2015_df <span class="sc">%&gt;%</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Region) <span class="sc">%&gt;%</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Standard.Error</span><span class="st">`</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2015_df)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co">#2016</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>file_2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2016.csv"</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>happiness_2016_df <span class="ot">&lt;-</span> file_2</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>happiness_2016_df <span class="ot">&lt;-</span> happiness_2016_df <span class="sc">%&gt;%</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Region) <span class="sc">%&gt;%</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Lower.Confidence.Interval</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Upper.Confidence.Interval</span><span class="st">`</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2016_df)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co">#2017</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>file_3 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2017.csv"</span>)</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>happiness_2017_df <span class="ot">&lt;-</span> file_3</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>happiness_2017_df <span class="ot">&lt;-</span> happiness_2017_df <span class="sc">%&gt;%</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Whisker.high</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.low</span><span class="st">`</span>)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2017_df)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="co">#2018</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>file_4 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2018.csv"</span>)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>happiness_2018_df <span class="ot">&lt;-</span> file_4</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>happiness_2018_df <span class="ot">&lt;-</span> happiness_2018_df <span class="sc">%&gt;%</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Overall.rank</span><span class="st">`</span>,</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.or.region</span><span class="st">`</span>,</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Score</span><span class="st">`</span>,</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>,</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming we want to convert the 'Happiness.score' column to numeric</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span>))</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2018_df)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="co">#2019</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>file_5 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2019.csv"</span>)</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>happiness_2019_df <span class="ot">&lt;-</span> file_5</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>happiness_2019_df <span class="ot">&lt;-</span> happiness_2019_df <span class="sc">%&gt;%</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Overall.rank</span><span class="st">`</span>,</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.or.region</span><span class="st">`</span>,</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Score</span><span class="st">`</span>,</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>,</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2019_df)</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the 'Dystopia Residual' column to the 2018 and 2019 dataframes</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>happiness_2019_df<span class="sc">$</span><span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="co">#2020</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>file_6 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2020.csv"</span>)</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> file_6</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> happiness_2020_df <span class="sc">%&gt;%</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Regional.indicator</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> happiness_2020_df <span class="sc">%&gt;%</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2020_df)</span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a><span class="co">#2021</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>file_7 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2021.csv"</span>)</span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> file_7</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> happiness_2021_df <span class="sc">%&gt;%</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Regional.indicator</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> happiness_2021_df <span class="sc">%&gt;%</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2021_df)</span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a><span class="co">#2022</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>file_8 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2022.csv"</span>)</span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>happiness_2022_df <span class="ot">&lt;-</span> file_8</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert only specific columns that contain numbers</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Happiness.score'</span>, <span class="st">'Explained.by..GDP.per.capita'</span>, <span class="st">'Explained.by..Social.support'</span>, </span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained.by..Healthy.life.expectancy'</span>, <span class="st">'Explained.by..Freedom.to.make.life.choices'</span>, </span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained.by..Perceptions.of.corruption'</span>, <span class="st">'Explained.by..Generosity'</span>, </span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Dystopia..1.83....residual'</span>)</span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>happiness_2022_df[numeric_cols] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(happiness_2022_df[numeric_cols], <span class="cf">function</span>(x) {</span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, x))</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>happiness_2022_df <span class="ot">&lt;-</span> happiness_2022_df <span class="sc">%&gt;%</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">RANK</span><span class="st">`</span>,</span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.score</span><span class="st">`</span>,</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia..1.83....residual</span><span class="st">`</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.high</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.low</span><span class="st">`</span>) </span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2022_df)</span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a><span class="co">#2023</span></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a>file_9 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2023.csv"</span>)</span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> file_9</span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> happiness_2023_df <span class="sc">%&gt;%</span></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> happiness_2023_df <span class="sc">%&gt;%</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2023_df)</span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding 'Year' column to each dataframe</span></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a>happiness_2015_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2015</span></span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a>happiness_2016_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2016</span></span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a>happiness_2017_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2017</span></span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2018</span></span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a>happiness_2019_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2019</span></span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a>happiness_2020_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a>happiness_2021_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2021</span></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a>happiness_2022_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2022</span></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a>happiness_2023_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2023</span></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2015_df, <span class="st">'data/cleaned_2015_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2016_df, <span class="st">'data/cleaned_2016_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2017_df, <span class="st">'data/cleaned_2017_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2018_df, <span class="st">'data/cleaned_2018_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2019_df, <span class="st">'data/cleaned_2019_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2020_df, <span class="st">'data/cleaned_2020_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2021_df, <span class="st">'data/cleaned_2021_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-294"><a href="#cb1-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-295"><a href="#cb1-295" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-296"><a href="#cb1-296" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2022_df, <span class="st">'data/cleaned_2022_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-297"><a href="#cb1-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-298"><a href="#cb1-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-299"><a href="#cb1-299" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb1-300"><a href="#cb1-300" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2023_df, <span class="st">'data/cleaned_2023_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-301"><a href="#cb1-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-302"><a href="#cb1-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-303"><a href="#cb1-303" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a list of all dataframes for easier handling</span></span>
<span id="cb1-304"><a href="#cb1-304" aria-hidden="true" tabindex="-1"></a>list_of_dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(happiness_2015_df, happiness_2016_df, happiness_2017_df, happiness_2018_df, </span>
<span id="cb1-305"><a href="#cb1-305" aria-hidden="true" tabindex="-1"></a>                    happiness_2019_df, happiness_2020_df, happiness_2021_df, happiness_2022_df, </span>
<span id="cb1-306"><a href="#cb1-306" aria-hidden="true" tabindex="-1"></a>                    happiness_2023_df)</span>
<span id="cb1-307"><a href="#cb1-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-308"><a href="#cb1-308" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging all dataframes into one</span></span>
<span id="cb1-309"><a href="#cb1-309" aria-hidden="true" tabindex="-1"></a>happiness_all_years_df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(list_of_dfs)</span>
<span id="cb1-310"><a href="#cb1-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-311"><a href="#cb1-311" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the combined dataframe</span></span>
<span id="cb1-312"><a href="#cb1-312" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(happiness_all_years_df)</span>
<span id="cb1-313"><a href="#cb1-313" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(happiness_all_years_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In a world that constantly grapples with various challenges, understanding what contributes to human happiness has never been more crucial. The World Happiness Application is designed to unravel the complexities of what makes societies thrive in terms of happiness and well-being. Drawing upon data from the esteemed World Happiness Report, this interactive Shiny application offers a multifaceted view of global happiness dynamics.</p>
<p>The application is built on a foundation of robust and clean data, sourced from the comprehensive annual reports that explore the state of global happiness. These reports rank countries based on several happiness indicators including economic factors like GDP per capita, social factors like family and community support, health life expectancy, personal freedom, perceived government and business corruption, and generosity. By amalgamating data from the years 2015 to 2023, our application provides a unique longitudinal perspective on how happiness indices have evolved globally.</p>
<p>One of the core features of the World Happiness Application is its interactivity and user-friendly interface, developed using R Shiny, a powerful web application framework. Users can engage with a variety of data visualizations, including scatter plots, time series graphs, and heatmaps, to delve deeper into the happiness trends of different countries and regions. Each visualization is designed to be both informative and intuitive, offering users the flexibility to select specific years, countries, and happiness variables for comparison.</p>
<p>A key aspect of the application is the “Happiness Trends” plot, which visualizes how the happiness ranks of various countries have shifted over the years, providing insights into the trajectories of nations in their pursuit of well-being. Another highlight is the “World Heatmap,” a choropleth map that vividly depicts happiness rankings across the globe, inviting users to explore geographical patterns in happiness.</p>
</section>
<section id="question-1-aspects-influencing-well-being-over-time." class="level1">
<h1>Question 1: Aspects influencing well-being over time.</h1>
<section id="introduction-1" class="level2">
<h2 class="anchored" data-anchor-id="introduction-1">Introduction</h2>
<section id="how-do-various-factors-impact-the-overall-happiness-score-across-different-countries-over-the-years" class="level3">
<h3 class="anchored" data-anchor-id="how-do-various-factors-impact-the-overall-happiness-score-across-different-countries-over-the-years">How do various factors impact the overall happiness score across different countries over the years?</h3>
<p>We explore the complex interactions between many elements that affect general well-being in our quest to comprehend happiness on a global scale. We seek to understand how factors, such as economic stability, family support, health, freedom, trust in society, and generosity, affect the overall happiness scores throughout time and in different nations. By enabling users to interact with the data, this exploration reveals the complex connections between these important variables and the pursuit of happiness as a group.</p>
<p>In our pursuit to understand happiness on a global scale, we delve into the intricate interplay of diverse factors that contribute to overall well-being. By examining economic stability, family support, health, freedom, trust in society, and generosity, we aim to discern how these facets influence the overarching happiness scores across different countries and over time. This exploration empowers users to interactively engage with data, unraveling the intricate relationship between these pivotal factors and the collective pursuit&nbsp;of&nbsp;happiness.</p>
</section>
</section>
<section id="approach" class="level2">
<h2 class="anchored" data-anchor-id="approach">Approach</h2>
<p>In our interactive Shiny application, we offer users an intuitive platform for dynamic data exploration. Featuring three dropdown menus for the x-axis, y-axis, and country selection (allowing multi-country selection), alongside nine buttons for years spanning from 2015 to 2023, users can precisely pinpoint specific years for analysis. Additionally, a slider facilitates the selection of the number of countries to display.</p>
<p>The heart of the app resides in the ‘Plot’ tab, where users can select any two factors, including the happiness score, for the x and y axes. Each selection generates a data point on the graph, and upon hovering over these points, Plotly provides detailed insights related to the chosen factors and countries. This setup grants users the power to delve into individual factor analyses and country comparisons, fostering a deeper understanding of the data dynamics.</p>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>The Happiness Report examining six factors in the year 2019 as an example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(markdown)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> happiness2015) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Economy, <span class="at">y =</span> Happiness.Score, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">colour =</span> Region, <span class="at">label =</span> Country), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Economy, <span class="at">y =</span> Happiness.Score), </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggtitle</span>(<span class="st">"Economy vs Happiness Score"</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/Scatter Plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><img src="images/family.png" class="img-fluid" width="1159"></p>
<p><img src="images/economy.png" class="img-fluid" width="1155"></p>
<p><img src="images/freedom.png" class="img-fluid" width="1148"></p>
<p><img src="images/generosity.png" class="img-fluid" width="1167"></p>
<p><img src="images/health.png" class="img-fluid" width="1164"></p>
<p><img src="images/corruption.png" class="img-fluid" width="1169"></p>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>Across the temporal spectrum from 2015 to 2023, our observation between Family (social support) and Happiness Score revealed intriguing insights. Initially, higher degrees of family support aligned with notably higher happiness scores. Subsequently, while the scores remained elevated, both the number of instances and the degree of family support slightly decreased. However, a resurgence followed, mirroring the initial phase’s trend before experiencing a slight decline towards the end. Overall, this analysis underscores a proportional relationship, emphasizing that increased family support correlates positively with higher happiness scores—a compelling testament to its pivotal role as a contributing factor in fostering well-being.</p>
<p>The correlation between health and happiness scores appears relatively consistent from 2015 to 2023, showing limited variations. Western European countries consistently maintain top positions, while Sub-Saharan African nations consistently rank at the bottom in this regard. Over the years, a clear pattern emerged: as the economy (GDP per capita) grew, so did happiness scores. Though the intensity varied, the trend remained consistent. In 2022, this link intensified, indicating a proportional relationship between a thriving economy and higher happiness.</p>
<p>When comparing Trust (government corruption) and Happiness Score across countries, intriguing trends emerged. Western European nations like Finland, Denmark, Switzerland, and Sweden showed higher corruption levels but sustained higher happiness. Conversely, countries like New Zealand, Singapore, and Qatar followed a similar pattern. Rwanda depicted the highest corruption and lowest happiness, while Sub-Saharan and some Eastern European nations showcased lower corruption but also lower happiness levels overall.</p>
<p>Upon analyzing the relationship between happiness scores and freedom, it’s evident that since 2019, Afghanistan consistently exhibits the lowest happiness score. Meanwhile, the Western European region consistently maintains a top-ranking position in happiness scores from 2015 to 2023. When examining the correlation between happiness scores and generosity, it becomes evident that Finland consistently secures the top position throughout the years 2015 to 2023 in terms of happiness scores.</p>
</section>
</section>
<section id="question-2-patterns-of-change-in-happiness-scores-related-to-global-events." class="level1">
<h1>Question 2: Patterns of change in happiness scores related to global events.</h1>
<p>From 2015 to 2023, a series of major global events significantly impacted the happiness scores of various countries. These events, ranging from economic crises to geopolitical conflicts and health emergencies, have caused notable fluctuations in global happiness levels. In this brief introduction, we will list some of these key events and identify the countries most affected by them.</p>
<section id="major-events-affecting-happiness-scores-2015-2023" class="level2">
<h2 class="anchored" data-anchor-id="major-events-affecting-happiness-scores-2015-2023">Major Events Affecting Happiness Scores (2015-2023):</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>covid_years_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    happiness2015 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2015</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    happiness2016 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2016</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    happiness2017 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2017</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    happiness2018<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2018</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    happiness2019<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2019</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    happiness2020 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2020</span>),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    happiness2021 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2021</span>),</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    happiness2022 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2022</span>),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    happiness2023 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2023</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>filtered_covid_data <span class="ot">&lt;-</span> covid_years_data <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"United States"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(Year, Country) <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>      <span class="co">#slice_head(n = input$num_countries) %&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> filtered_covid_data, <span class="at">x =</span> <span class="sc">~</span>Year, <span class="at">y =</span> <span class="sc">~</span>Happiness.Rank, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>Region, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">hoverinfo =</span> <span class="st">'text'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">"Country:"</span>, Country, <span class="st">"&lt;br&gt;Year:"</span>, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                      Year, <span class="st">"&lt;br&gt;Happiness Rank:"</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                      Happiness.Rank)) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Happiness Rank Trends"</span>),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">margin =</span> <span class="fu">list</span>(<span class="at">t =</span> <span class="dv">50</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Year'</span>, <span class="at">tickvals =</span> <span class="fu">c</span>(<span class="st">'2015'</span>,<span class="st">'2016'</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2017'</span>,<span class="st">'2018'</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2019'</span>,<span class="st">'2020'</span>, </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2021'</span>, <span class="st">'2022'</span>, </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2023'</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ticktext =</span> <span class="fu">c</span>(<span class="st">'2015'</span>,<span class="st">'2016'</span>,<span class="st">'2017'</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">'2018'</span>,<span class="st">'2019'</span>,<span class="st">'2020'</span>, </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">'2021'</span>, <span class="st">'2022'</span>, <span class="st">'2023'</span>)),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Happiness Score'</span>),</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">hovermode =</span> <span class="st">'closest'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="brexit-vote" class="level3">
<h3 class="anchored" data-anchor-id="brexit-vote">2016 Brexit Vote:</h3>
<p>The United Kingdom experienced political and economic uncertainty, affecting its happiness scores, as well as indirect impacts on EU member states.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Uk_2016.png" class="img-fluid figure-img" width="521"></p>
<figcaption class="figure-caption">Brexit Vote affecting happiness score in UK</figcaption>
</figure>
</div>
<p>In 2016, the graph shows that the happiness rank for the United Kingdom increased, indicating a decrease in happiness. This is likely due to the uncertainty and division caused by the Brexit vote, as it introduced concerns about the UK’s economic future and its citizens’ identity within Europe. Such socio-political events typically create anxiety and can negatively impact the overall mood of the nation.</p>
</section>
<section id="us-china-trade-war" class="level3">
<h3 class="anchored" data-anchor-id="us-china-trade-war">2017-2018 US-China Trade War:</h3>
<p>Led to economic repercussions in the United States and China, as well as in countries with strong trade ties to these nations.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/china, US trade war.png" class="img-fluid figure-img" width="521"></p>
<figcaption class="figure-caption">US_China Trade War</figcaption>
</figure>
</div>
<p>The 2017-2018 US-China trade war had a significant impact on the happiness ranks of both countries. It led to economic uncertainties, job losses, and disrupted trade, which can contribute to decreased happiness among the population. The trade war also affected global economic stability, indirectly influencing happiness ranks in other nations closely tied to the US-China trade relationship.</p>
</section>
<section id="covid-19-pandemic" class="level3">
<h3 class="anchored" data-anchor-id="covid-19-pandemic">2019-2023 COVID-19 Pandemic:</h3>
<p>Globally affected all countries, with significant impacts on mental health, economic stability, and overall happiness. Countries like Italy, Spain, the United States, Brazil, and India were among the hardest hit due to high infection and mortality rates.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/covid_19_updated.png" class="img-fluid figure-img" width="512"></p>
<figcaption class="figure-caption">Covid-19 effect on happiness rank</figcaption>
</figure>
</div>
<p>The graph indicates a general increase in happiness rank for most regions during the COVID-19 pandemic, suggesting a decline in happiness. Some regions show recovery post-pandemic, while others continue to experience lower happiness levels, with varying impacts across different parts of the world. india, china, Usa</p>
</section>
<section id="pakistan-floods" class="level3">
<h3 class="anchored" data-anchor-id="pakistan-floods">2022 Pakistan Floods:</h3>
<p>Heavy monsoon rains led to catastrophic flooding in Pakistan, causing massive displacement and damage to infrastructure and potentially affecting the happiness rank.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pakistan.png" class="img-fluid figure-img" width="512"></p>
<figcaption class="figure-caption">Pakistan floods affecting happiness rank</figcaption>
</figure>
</div>
<p>In 2022, Pakistan experienced a significant increase in its happiness rank, signifying a decrease in happiness. This was likely influenced by catastrophic flooding caused by heavy monsoon rains, resulting in displacement and infrastructure damage, which typically lowers overall happiness.</p>
</section>
</section>
<section id="miscellaneous-plots" class="level2">
<h2 class="anchored" data-anchor-id="miscellaneous-plots">Miscellaneous Plots:</h2>
<section id="world-heatmap" class="level3">
<h3 class="anchored" data-anchor-id="world-heatmap">World Heatmap:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(happiness2015, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"Country"</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> world) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Happiness.Score, <span class="at">geometry =</span> geometry), <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"World Happiness Map 2015"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/Heatmap-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="trend-comparison" class="level3">
<h3 class="anchored" data-anchor-id="trend-comparison">Trend Comparison:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>filtered_trend <span class="ot">&lt;-</span> covid_years_data <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"United States"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(filtered_trend, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Economy, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">unique</span>(filtered_trend<span class="sc">$</span>Year)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">#theme(legend.position = "none") +</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series Plot of Economy"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(filtered_trend, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Happiness.Score, </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>                                <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">unique</span>(filtered_trend<span class="sc">$</span>Year)) <span class="sc">+</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>      <span class="co">#theme(legend.position = "none") +</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series of Happiness Score"</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>(p<span class="sc">|</span>q) <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/Trend Comparison-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This World Happiness Shiny Application is not just a tool for data exploration, it is a window into the diverse and dynamic nature of global well-being. It serves as a valuable resource for researchers, policymakers, educators, and anyone interested in the study of happiness. By offering user-driven, interactive data analysis, it empowers users to uncover the complex tapestry of factors that contribute to a happier and more fulfilling global society.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb9" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "World Happiness Report"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "A Journey through World Happiness:)"</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Plot Pioneers - Athira, Priyarsha, Shalon, Chethana"</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## Abstract</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>This project focuses on developing an interactive Shiny application to transform the intricate data from the World Happiness Report into an accessible and engaging platform for a diverse audience. While the report offers valuable insights into the happiness and well-being of individuals across countries, the complexity of the data often poses challenges in interpretation. Our objective is to simplify this process by creating an intuitive and user-friendly app that dynamically visualizes the data. The driving force behind our initiative is to bridge the gap between the richness of complex data and end-users seeking comprehension.</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Cleaning code:</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data cleaning, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>df_2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2015.csv"</span>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>df_2016 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2016.csv"</span>)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>df_2017 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2017.csv"</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>df_2018 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2018.csv"</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>df_2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2019.csv"</span>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>df_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2020.csv"</span>)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>df_2021 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2021.csv"</span>)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>df_2022 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2022.csv"</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>df_2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2023.csv"</span>)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2015)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2016)</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2017)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2018)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2019)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2020)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2021)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2022)</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_2023)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#2015</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Read CSV files and import into dataframes</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>file_1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2015.csv"</span>)</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>happiness_2015_df <span class="ot">&lt;-</span> file_1</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>happiness_2015_df <span class="ot">&lt;-</span> happiness_2015_df <span class="sc">%&gt;%</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Region) <span class="sc">%&gt;%</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Standard.Error</span><span class="st">`</span>)</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2015_df)</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a><span class="co">#2016</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>file_2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2016.csv"</span>)</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>happiness_2016_df <span class="ot">&lt;-</span> file_2</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>happiness_2016_df <span class="ot">&lt;-</span> happiness_2016_df <span class="sc">%&gt;%</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Region) <span class="sc">%&gt;%</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Lower.Confidence.Interval</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Upper.Confidence.Interval</span><span class="st">`</span>)</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2016_df)</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="co">#2017</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>file_3 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2017.csv"</span>)</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>happiness_2017_df <span class="ot">&lt;-</span> file_3</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>happiness_2017_df <span class="ot">&lt;-</span> happiness_2017_df <span class="sc">%&gt;%</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Rank</span><span class="st">`</span>,</span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.Score</span><span class="st">`</span>,</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Economy..GDP.per.Capita.</span><span class="st">`</span>,</span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Health..Life.Expectancy.</span><span class="st">`</span>,</span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Trust..Government.Corruption.</span><span class="st">`</span>,</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia.Residual</span><span class="st">`</span></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Whisker.high</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.low</span><span class="st">`</span>)</span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2017_df)</span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a><span class="co">#2018</span></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>file_4 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2018.csv"</span>)</span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>happiness_2018_df <span class="ot">&lt;-</span> file_4</span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>happiness_2018_df <span class="ot">&lt;-</span> happiness_2018_df <span class="sc">%&gt;%</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Overall.rank</span><span class="st">`</span>,</span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.or.region</span><span class="st">`</span>,</span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Score</span><span class="st">`</span>,</span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>,</span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming we want to convert the 'Happiness.score' column to numeric</span></span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span>))</span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2018_df)</span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a><span class="co">#2019</span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a>file_5 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2019.csv"</span>)</span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a>happiness_2019_df <span class="ot">&lt;-</span> file_5</span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a>happiness_2019_df <span class="ot">&lt;-</span> happiness_2019_df <span class="sc">%&gt;%</span></span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Overall.rank</span><span class="st">`</span>,</span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.or.region</span><span class="st">`</span>,</span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Score</span><span class="st">`</span>,</span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>,</span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span></span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2019_df)</span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the 'Dystopia Residual' column to the 2018 and 2019 dataframes</span></span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span><span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a>happiness_2019_df<span class="sc">$</span><span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a><span class="co">#2020</span></span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a>file_6 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2020.csv"</span>)</span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> file_6</span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-159"><a href="#cb9-159" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-160"><a href="#cb9-160" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> happiness_2020_df <span class="sc">%&gt;%</span></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Regional.indicator</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a>happiness_2020_df <span class="ot">&lt;-</span> happiness_2020_df <span class="sc">%&gt;%</span></span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2020_df)</span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a><span class="co">#2021</span></span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a>file_7 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2021.csv"</span>)</span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> file_7</span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> happiness_2021_df <span class="sc">%&gt;%</span></span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-197"><a href="#cb9-197" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-198"><a href="#cb9-198" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb9-199"><a href="#cb9-199" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb9-200"><a href="#cb9-200" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb9-201"><a href="#cb9-201" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-202"><a href="#cb9-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Regional.indicator</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb9-203"><a href="#cb9-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-204"><a href="#cb9-204" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb9-205"><a href="#cb9-205" aria-hidden="true" tabindex="-1"></a>happiness_2021_df <span class="ot">&lt;-</span> happiness_2021_df <span class="sc">%&gt;%</span></span>
<span id="cb9-206"><a href="#cb9-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-207"><a href="#cb9-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb9-208"><a href="#cb9-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-209"><a href="#cb9-209" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb9-210"><a href="#cb9-210" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2021_df)</span>
<span id="cb9-211"><a href="#cb9-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-212"><a href="#cb9-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-213"><a href="#cb9-213" aria-hidden="true" tabindex="-1"></a><span class="co">#2022</span></span>
<span id="cb9-214"><a href="#cb9-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-215"><a href="#cb9-215" aria-hidden="true" tabindex="-1"></a>file_8 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2022.csv"</span>)</span>
<span id="cb9-216"><a href="#cb9-216" aria-hidden="true" tabindex="-1"></a>happiness_2022_df <span class="ot">&lt;-</span> file_8</span>
<span id="cb9-217"><a href="#cb9-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-218"><a href="#cb9-218" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert only specific columns that contain numbers</span></span>
<span id="cb9-219"><a href="#cb9-219" aria-hidden="true" tabindex="-1"></a>numeric_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Happiness.score'</span>, <span class="st">'Explained.by..GDP.per.capita'</span>, <span class="st">'Explained.by..Social.support'</span>, </span>
<span id="cb9-220"><a href="#cb9-220" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained.by..Healthy.life.expectancy'</span>, <span class="st">'Explained.by..Freedom.to.make.life.choices'</span>, </span>
<span id="cb9-221"><a href="#cb9-221" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Explained.by..Perceptions.of.corruption'</span>, <span class="st">'Explained.by..Generosity'</span>, </span>
<span id="cb9-222"><a href="#cb9-222" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'Dystopia..1.83....residual'</span>)</span>
<span id="cb9-223"><a href="#cb9-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-224"><a href="#cb9-224" aria-hidden="true" tabindex="-1"></a>happiness_2022_df[numeric_cols] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(happiness_2022_df[numeric_cols], <span class="cf">function</span>(x) {</span>
<span id="cb9-225"><a href="#cb9-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, x))</span>
<span id="cb9-226"><a href="#cb9-226" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb9-227"><a href="#cb9-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-228"><a href="#cb9-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-229"><a href="#cb9-229" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-230"><a href="#cb9-230" aria-hidden="true" tabindex="-1"></a>happiness_2022_df <span class="ot">&lt;-</span> happiness_2022_df <span class="sc">%&gt;%</span></span>
<span id="cb9-231"><a href="#cb9-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-232"><a href="#cb9-232" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">RANK</span><span class="st">`</span>,</span>
<span id="cb9-233"><a href="#cb9-233" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Happiness.score</span><span class="st">`</span>,</span>
<span id="cb9-234"><a href="#cb9-234" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-235"><a href="#cb9-235" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb9-236"><a href="#cb9-236" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-237"><a href="#cb9-237" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-238"><a href="#cb9-238" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb9-239"><a href="#cb9-239" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb9-240"><a href="#cb9-240" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia..1.83....residual</span><span class="st">`</span></span>
<span id="cb9-241"><a href="#cb9-241" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-242"><a href="#cb9-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.high</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Whisker.low</span><span class="st">`</span>) </span>
<span id="cb9-243"><a href="#cb9-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-244"><a href="#cb9-244" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb9-245"><a href="#cb9-245" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2022_df)</span>
<span id="cb9-246"><a href="#cb9-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-247"><a href="#cb9-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-248"><a href="#cb9-248" aria-hidden="true" tabindex="-1"></a><span class="co">#2023</span></span>
<span id="cb9-249"><a href="#cb9-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-250"><a href="#cb9-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-251"><a href="#cb9-251" aria-hidden="true" tabindex="-1"></a>file_9 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/2023.csv"</span>)</span>
<span id="cb9-252"><a href="#cb9-252" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> file_9</span>
<span id="cb9-253"><a href="#cb9-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-254"><a href="#cb9-254" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the dataframe to rename data and match to all other years</span></span>
<span id="cb9-255"><a href="#cb9-255" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> happiness_2023_df <span class="sc">%&gt;%</span></span>
<span id="cb9-256"><a href="#cb9-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Generosity</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-257"><a href="#cb9-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-258"><a href="#cb9-258" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Country</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Country.name</span><span class="st">`</span>,</span>
<span id="cb9-259"><a href="#cb9-259" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Ladder.score</span><span class="st">`</span>,</span>
<span id="cb9-260"><a href="#cb9-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Economy</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Log.GDP.per.capita</span><span class="st">`</span>,</span>
<span id="cb9-261"><a href="#cb9-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Family</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Social.support</span><span class="st">`</span>,</span>
<span id="cb9-262"><a href="#cb9-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Healthy.life.expectancy</span><span class="st">`</span>,</span>
<span id="cb9-263"><a href="#cb9-263" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Freedom</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Freedom.to.make.life.choices</span><span class="st">`</span>,</span>
<span id="cb9-264"><a href="#cb9-264" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Government Corruption</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Perceptions.of.corruption</span><span class="st">`</span>,</span>
<span id="cb9-265"><a href="#cb9-265" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Generosity</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Explained.by..Generosity</span><span class="st">`</span>,</span>
<span id="cb9-266"><a href="#cb9-266" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Dystopia Residual</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Dystopia...residual</span><span class="st">`</span></span>
<span id="cb9-267"><a href="#cb9-267" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-268"><a href="#cb9-268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>( <span class="sc">-</span><span class="st">`</span><span class="at">Standard.error.of.ladder.score</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">upperwhisker</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">lowerwhisker</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">Logged.GDP.per.capita</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Social.support</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Healthy.life.expectancy</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Freedom.to.make.life.choices</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Perceptions.of.corruption</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">Ladder.score.in.Dystopia</span><span class="st">`</span>)</span>
<span id="cb9-269"><a href="#cb9-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-270"><a href="#cb9-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a "Happiness Rank" column after the "Country" column</span></span>
<span id="cb9-271"><a href="#cb9-271" aria-hidden="true" tabindex="-1"></a>happiness_2023_df <span class="ot">&lt;-</span> happiness_2023_df <span class="sc">%&gt;%</span></span>
<span id="cb9-272"><a href="#cb9-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rank</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Happiness Score</span><span class="st">`</span>, <span class="at">ties.method =</span> <span class="st">"first"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-273"><a href="#cb9-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, <span class="st">`</span><span class="at">Happiness Rank</span><span class="st">`</span>, <span class="fu">everything</span>())</span>
<span id="cb9-274"><a href="#cb9-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-275"><a href="#cb9-275" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the first few rows</span></span>
<span id="cb9-276"><a href="#cb9-276" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(happiness_2023_df)</span>
<span id="cb9-277"><a href="#cb9-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-278"><a href="#cb9-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-279"><a href="#cb9-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-280"><a href="#cb9-280" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding 'Year' column to each dataframe</span></span>
<span id="cb9-281"><a href="#cb9-281" aria-hidden="true" tabindex="-1"></a>happiness_2015_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2015</span></span>
<span id="cb9-282"><a href="#cb9-282" aria-hidden="true" tabindex="-1"></a>happiness_2016_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2016</span></span>
<span id="cb9-283"><a href="#cb9-283" aria-hidden="true" tabindex="-1"></a>happiness_2017_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2017</span></span>
<span id="cb9-284"><a href="#cb9-284" aria-hidden="true" tabindex="-1"></a>happiness_2018_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2018</span></span>
<span id="cb9-285"><a href="#cb9-285" aria-hidden="true" tabindex="-1"></a>happiness_2019_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2019</span></span>
<span id="cb9-286"><a href="#cb9-286" aria-hidden="true" tabindex="-1"></a>happiness_2020_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb9-287"><a href="#cb9-287" aria-hidden="true" tabindex="-1"></a>happiness_2021_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2021</span></span>
<span id="cb9-288"><a href="#cb9-288" aria-hidden="true" tabindex="-1"></a>happiness_2022_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2022</span></span>
<span id="cb9-289"><a href="#cb9-289" aria-hidden="true" tabindex="-1"></a>happiness_2023_df<span class="sc">$</span>Year <span class="ot">&lt;-</span> <span class="dv">2023</span></span>
<span id="cb9-290"><a href="#cb9-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-291"><a href="#cb9-291" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-292"><a href="#cb9-292" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2015_df, <span class="st">'data/cleaned_2015_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-293"><a href="#cb9-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-294"><a href="#cb9-294" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-295"><a href="#cb9-295" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2016_df, <span class="st">'data/cleaned_2016_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-296"><a href="#cb9-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-297"><a href="#cb9-297" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-298"><a href="#cb9-298" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2017_df, <span class="st">'data/cleaned_2017_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-299"><a href="#cb9-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-300"><a href="#cb9-300" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-301"><a href="#cb9-301" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2018_df, <span class="st">'data/cleaned_2018_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-302"><a href="#cb9-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-303"><a href="#cb9-303" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-304"><a href="#cb9-304" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2019_df, <span class="st">'data/cleaned_2019_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-305"><a href="#cb9-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-306"><a href="#cb9-306" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-307"><a href="#cb9-307" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2020_df, <span class="st">'data/cleaned_2020_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-308"><a href="#cb9-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-309"><a href="#cb9-309" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-310"><a href="#cb9-310" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2021_df, <span class="st">'data/cleaned_2021_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-311"><a href="#cb9-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-312"><a href="#cb9-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-313"><a href="#cb9-313" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-314"><a href="#cb9-314" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2022_df, <span class="st">'data/cleaned_2022_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-315"><a href="#cb9-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-316"><a href="#cb9-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-317"><a href="#cb9-317" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-318"><a href="#cb9-318" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(happiness_2023_df, <span class="st">'data/cleaned_2023_df.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-319"><a href="#cb9-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-320"><a href="#cb9-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-321"><a href="#cb9-321" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a list of all dataframes for easier handling</span></span>
<span id="cb9-322"><a href="#cb9-322" aria-hidden="true" tabindex="-1"></a>list_of_dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(happiness_2015_df, happiness_2016_df, happiness_2017_df, happiness_2018_df, </span>
<span id="cb9-323"><a href="#cb9-323" aria-hidden="true" tabindex="-1"></a>                    happiness_2019_df, happiness_2020_df, happiness_2021_df, happiness_2022_df, </span>
<span id="cb9-324"><a href="#cb9-324" aria-hidden="true" tabindex="-1"></a>                    happiness_2023_df)</span>
<span id="cb9-325"><a href="#cb9-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-326"><a href="#cb9-326" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging all dataframes into one</span></span>
<span id="cb9-327"><a href="#cb9-327" aria-hidden="true" tabindex="-1"></a>happiness_all_years_df <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(list_of_dfs)</span>
<span id="cb9-328"><a href="#cb9-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-329"><a href="#cb9-329" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the combined dataframe</span></span>
<span id="cb9-330"><a href="#cb9-330" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(happiness_all_years_df)</span>
<span id="cb9-331"><a href="#cb9-331" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(happiness_all_years_df)</span>
<span id="cb9-332"><a href="#cb9-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-333"><a href="#cb9-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-334"><a href="#cb9-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-335"><a href="#cb9-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-336"><a href="#cb9-336" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message=FALSE, warning=FALSE, results='hide',echo=FALSE}</span></span>
<span id="cb9-337"><a href="#cb9-337" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb9-338"><a href="#cb9-338" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-339"><a href="#cb9-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-340"><a href="#cb9-340" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the 2015 dataset</span></span>
<span id="cb9-341"><a href="#cb9-341" aria-hidden="true" tabindex="-1"></a>df_2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/2015.csv'</span>)</span>
<span id="cb9-342"><a href="#cb9-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-343"><a href="#cb9-343" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only the Country and Region columns and remove duplicates</span></span>
<span id="cb9-344"><a href="#cb9-344" aria-hidden="true" tabindex="-1"></a>countries_aggregated <span class="ot">&lt;-</span> df_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb9-345"><a href="#cb9-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, Region) <span class="sc">%&gt;%</span> </span>
<span id="cb9-346"><a href="#cb9-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb9-347"><a href="#cb9-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-348"><a href="#cb9-348" aria-hidden="true" tabindex="-1"></a><span class="co"># Save this new dataset to a CSV file</span></span>
<span id="cb9-349"><a href="#cb9-349" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(countries_aggregated, <span class="st">'data/countries_aggregated.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-350"><a href="#cb9-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-351"><a href="#cb9-351" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a mapping of countries to regions</span></span>
<span id="cb9-352"><a href="#cb9-352" aria-hidden="true" tabindex="-1"></a>country_region_map <span class="ot">&lt;-</span> df_2015 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country, Region) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb9-353"><a href="#cb9-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-354"><a href="#cb9-354" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the combined dataset</span></span>
<span id="cb9-355"><a href="#cb9-355" aria-hidden="true" tabindex="-1"></a>df_combined <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/happiness_all_years_df.csv'</span>)</span>
<span id="cb9-356"><a href="#cb9-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-357"><a href="#cb9-357" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the 'Region' column to the combined dataset</span></span>
<span id="cb9-358"><a href="#cb9-358" aria-hidden="true" tabindex="-1"></a>df_combined <span class="ot">&lt;-</span> df_combined <span class="sc">%&gt;%</span> </span>
<span id="cb9-359"><a href="#cb9-359" aria-hidden="true" tabindex="-1"></a>               <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-360"><a href="#cb9-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-361"><a href="#cb9-361" aria-hidden="true" tabindex="-1"></a>df_combined <span class="ot">&lt;-</span> df_combined <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb9-362"><a href="#cb9-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-363"><a href="#cb9-363" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the first few rows of the updated combined dataset</span></span>
<span id="cb9-364"><a href="#cb9-364" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_combined)</span>
<span id="cb9-365"><a href="#cb9-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-366"><a href="#cb9-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-367"><a href="#cb9-367" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-368"><a href="#cb9-368" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df_combined, <span class="st">'data/updated_happiness_all_years.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-369"><a href="#cb9-369" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-370"><a href="#cb9-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-371"><a href="#cb9-371" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message=FALSE, warning=FALSE, results='hide',echo=FALSE}</span></span>
<span id="cb9-372"><a href="#cb9-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-373"><a href="#cb9-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-374"><a href="#cb9-374" aria-hidden="true" tabindex="-1"></a><span class="co">#2015</span></span>
<span id="cb9-375"><a href="#cb9-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-376"><a href="#cb9-376" aria-hidden="true" tabindex="-1"></a>cl_2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2015_df.csv'</span>)</span>
<span id="cb9-377"><a href="#cb9-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-378"><a href="#cb9-378" aria-hidden="true" tabindex="-1"></a>cl_2015 <span class="ot">&lt;-</span> cl_2015 <span class="sc">%&gt;%</span> </span>
<span id="cb9-379"><a href="#cb9-379" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-380"><a href="#cb9-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-381"><a href="#cb9-381" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2015 &lt;- cl_2015 %&gt;% select(-1)</span></span>
<span id="cb9-382"><a href="#cb9-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-383"><a href="#cb9-383" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2015)</span>
<span id="cb9-384"><a href="#cb9-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-385"><a href="#cb9-385" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-386"><a href="#cb9-386" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2015, <span class="st">'data/happiness_2015_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-387"><a href="#cb9-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-388"><a href="#cb9-388" aria-hidden="true" tabindex="-1"></a><span class="co">#2016</span></span>
<span id="cb9-389"><a href="#cb9-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-390"><a href="#cb9-390" aria-hidden="true" tabindex="-1"></a>cl_2016 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2016_df.csv'</span>)</span>
<span id="cb9-391"><a href="#cb9-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-392"><a href="#cb9-392" aria-hidden="true" tabindex="-1"></a>cl_2016 <span class="ot">&lt;-</span> cl_2016 <span class="sc">%&gt;%</span> </span>
<span id="cb9-393"><a href="#cb9-393" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-394"><a href="#cb9-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-395"><a href="#cb9-395" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2016 &lt;- cl_2016 %&gt;% select(-1)</span></span>
<span id="cb9-396"><a href="#cb9-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-397"><a href="#cb9-397" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2016)</span>
<span id="cb9-398"><a href="#cb9-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-399"><a href="#cb9-399" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-400"><a href="#cb9-400" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2016, <span class="st">'data/happiness_2016_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-401"><a href="#cb9-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-402"><a href="#cb9-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-403"><a href="#cb9-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-404"><a href="#cb9-404" aria-hidden="true" tabindex="-1"></a><span class="co">#2017</span></span>
<span id="cb9-405"><a href="#cb9-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-406"><a href="#cb9-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-407"><a href="#cb9-407" aria-hidden="true" tabindex="-1"></a>cl_2017 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2017_df.csv'</span>)</span>
<span id="cb9-408"><a href="#cb9-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-409"><a href="#cb9-409" aria-hidden="true" tabindex="-1"></a>cl_2017 <span class="ot">&lt;-</span> cl_2017 <span class="sc">%&gt;%</span> </span>
<span id="cb9-410"><a href="#cb9-410" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-411"><a href="#cb9-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-412"><a href="#cb9-412" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2017 &lt;- cl_2017 %&gt;% select(-1)</span></span>
<span id="cb9-413"><a href="#cb9-413" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2017)</span>
<span id="cb9-414"><a href="#cb9-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-415"><a href="#cb9-415" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-416"><a href="#cb9-416" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2017, <span class="st">'data/happiness_2017_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-417"><a href="#cb9-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-418"><a href="#cb9-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-419"><a href="#cb9-419" aria-hidden="true" tabindex="-1"></a><span class="co">#2018</span></span>
<span id="cb9-420"><a href="#cb9-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-421"><a href="#cb9-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-422"><a href="#cb9-422" aria-hidden="true" tabindex="-1"></a>cl_2018 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2018_df.csv'</span>)</span>
<span id="cb9-423"><a href="#cb9-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-424"><a href="#cb9-424" aria-hidden="true" tabindex="-1"></a>cl_2018 <span class="ot">&lt;-</span> cl_2018 <span class="sc">%&gt;%</span> </span>
<span id="cb9-425"><a href="#cb9-425" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-426"><a href="#cb9-426" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2018 &lt;- cl_2018 %&gt;% select(-1)</span></span>
<span id="cb9-427"><a href="#cb9-427" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2018)</span>
<span id="cb9-428"><a href="#cb9-428" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-429"><a href="#cb9-429" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2018, <span class="st">'data/happiness_2018_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-430"><a href="#cb9-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-431"><a href="#cb9-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-432"><a href="#cb9-432" aria-hidden="true" tabindex="-1"></a><span class="co">#2019</span></span>
<span id="cb9-433"><a href="#cb9-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-434"><a href="#cb9-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-435"><a href="#cb9-435" aria-hidden="true" tabindex="-1"></a>cl_2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2019_df.csv'</span>)</span>
<span id="cb9-436"><a href="#cb9-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-437"><a href="#cb9-437" aria-hidden="true" tabindex="-1"></a>cl_2019 <span class="ot">&lt;-</span> cl_2019 <span class="sc">%&gt;%</span> </span>
<span id="cb9-438"><a href="#cb9-438" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-439"><a href="#cb9-439" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2019 &lt;- cl_2019 %&gt;% select(-1)</span></span>
<span id="cb9-440"><a href="#cb9-440" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2019)</span>
<span id="cb9-441"><a href="#cb9-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-442"><a href="#cb9-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-443"><a href="#cb9-443" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-444"><a href="#cb9-444" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2019, <span class="st">'data/happiness_2019_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-445"><a href="#cb9-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-446"><a href="#cb9-446" aria-hidden="true" tabindex="-1"></a><span class="co">#2020</span></span>
<span id="cb9-447"><a href="#cb9-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-448"><a href="#cb9-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-449"><a href="#cb9-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-450"><a href="#cb9-450" aria-hidden="true" tabindex="-1"></a>cl_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2020_df.csv'</span>)</span>
<span id="cb9-451"><a href="#cb9-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-452"><a href="#cb9-452" aria-hidden="true" tabindex="-1"></a>cl_2020 <span class="ot">&lt;-</span> cl_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb9-453"><a href="#cb9-453" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-454"><a href="#cb9-454" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2020 &lt;- cl_2020 %&gt;% select(-1)</span></span>
<span id="cb9-455"><a href="#cb9-455" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2020)</span>
<span id="cb9-456"><a href="#cb9-456" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-457"><a href="#cb9-457" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2020, <span class="st">'data/happiness_2020_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-458"><a href="#cb9-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-459"><a href="#cb9-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-460"><a href="#cb9-460" aria-hidden="true" tabindex="-1"></a><span class="co">#2021</span></span>
<span id="cb9-461"><a href="#cb9-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-462"><a href="#cb9-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-463"><a href="#cb9-463" aria-hidden="true" tabindex="-1"></a>cl_2021 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2021_df.csv'</span>)</span>
<span id="cb9-464"><a href="#cb9-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-465"><a href="#cb9-465" aria-hidden="true" tabindex="-1"></a>cl_2021 <span class="ot">&lt;-</span> cl_2021 <span class="sc">%&gt;%</span> </span>
<span id="cb9-466"><a href="#cb9-466" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-467"><a href="#cb9-467" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2021 &lt;- cl_2021 %&gt;% select(-1)</span></span>
<span id="cb9-468"><a href="#cb9-468" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2021)</span>
<span id="cb9-469"><a href="#cb9-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-470"><a href="#cb9-470" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-471"><a href="#cb9-471" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2021, <span class="st">'data/happiness_2021_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-472"><a href="#cb9-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-473"><a href="#cb9-473" aria-hidden="true" tabindex="-1"></a><span class="co">#2022</span></span>
<span id="cb9-474"><a href="#cb9-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-475"><a href="#cb9-475" aria-hidden="true" tabindex="-1"></a>cl_2022 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2022_df.csv'</span>)</span>
<span id="cb9-476"><a href="#cb9-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-477"><a href="#cb9-477" aria-hidden="true" tabindex="-1"></a>cl_2022 <span class="ot">&lt;-</span> cl_2022 <span class="sc">%&gt;%</span> </span>
<span id="cb9-478"><a href="#cb9-478" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-479"><a href="#cb9-479" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2022 &lt;- cl_2022 %&gt;% select(-1)</span></span>
<span id="cb9-480"><a href="#cb9-480" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2022)</span>
<span id="cb9-481"><a href="#cb9-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-482"><a href="#cb9-482" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-483"><a href="#cb9-483" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2022, <span class="st">'data/happiness_2022_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-484"><a href="#cb9-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-485"><a href="#cb9-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-486"><a href="#cb9-486" aria-hidden="true" tabindex="-1"></a><span class="co">#2023</span></span>
<span id="cb9-487"><a href="#cb9-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-488"><a href="#cb9-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-489"><a href="#cb9-489" aria-hidden="true" tabindex="-1"></a>cl_2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'data/cleaned_2023_df.csv'</span>)</span>
<span id="cb9-490"><a href="#cb9-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-491"><a href="#cb9-491" aria-hidden="true" tabindex="-1"></a>cl_2023 <span class="ot">&lt;-</span> cl_2023 <span class="sc">%&gt;%</span> </span>
<span id="cb9-492"><a href="#cb9-492" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">left_join</span>(country_region_map, <span class="at">by =</span> <span class="st">"Country"</span>)</span>
<span id="cb9-493"><a href="#cb9-493" aria-hidden="true" tabindex="-1"></a><span class="co">#cl_2023 &lt;- cl_2023 %&gt;% select(-1)</span></span>
<span id="cb9-494"><a href="#cb9-494" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cl_2023)</span>
<span id="cb9-495"><a href="#cb9-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-496"><a href="#cb9-496" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the updated combined dataset</span></span>
<span id="cb9-497"><a href="#cb9-497" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(cl_2023, <span class="st">'data/happiness_2023_clean.csv'</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-498"><a href="#cb9-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-499"><a href="#cb9-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-500"><a href="#cb9-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-501"><a href="#cb9-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-502"><a href="#cb9-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-503"><a href="#cb9-503" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-504"><a href="#cb9-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-505"><a href="#cb9-505" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb9-506"><a href="#cb9-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-507"><a href="#cb9-507" aria-hidden="true" tabindex="-1"></a>In a world that constantly grapples with various challenges, understanding what contributes to human happiness has never been more crucial. The World Happiness Application is designed to unravel the complexities of what makes societies thrive in terms of happiness and well-being. Drawing upon data from the esteemed World Happiness Report, this interactive Shiny application offers a multifaceted view of global happiness dynamics.</span>
<span id="cb9-508"><a href="#cb9-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-509"><a href="#cb9-509" aria-hidden="true" tabindex="-1"></a>The application is built on a foundation of robust and clean data, sourced from the comprehensive annual reports that explore the state of global happiness. These reports rank countries based on several happiness indicators including economic factors like GDP per capita, social factors like family and community support, health life expectancy, personal freedom, perceived government and business corruption, and generosity. By amalgamating data from the years 2015 to 2023, our application provides a unique longitudinal perspective on how happiness indices have evolved globally.</span>
<span id="cb9-510"><a href="#cb9-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-511"><a href="#cb9-511" aria-hidden="true" tabindex="-1"></a>One of the core features of the World Happiness Application is its interactivity and user-friendly interface, developed using R Shiny, a powerful web application framework. Users can engage with a variety of data visualizations, including scatter plots, time series graphs, and heatmaps, to delve deeper into the happiness trends of different countries and regions. Each visualization is designed to be both informative and intuitive, offering users the flexibility to select specific years, countries, and happiness variables for comparison.</span>
<span id="cb9-512"><a href="#cb9-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-513"><a href="#cb9-513" aria-hidden="true" tabindex="-1"></a>A key aspect of the application is the "Happiness Trends" plot, which visualizes how the happiness ranks of various countries have shifted over the years, providing insights into the trajectories of nations in their pursuit of well-being. Another highlight is the "World Heatmap," a choropleth map that vividly depicts happiness rankings across the globe, inviting users to explore geographical patterns in happiness.</span>
<span id="cb9-514"><a href="#cb9-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-515"><a href="#cb9-515" aria-hidden="true" tabindex="-1"></a><span class="fu"># Question 1: Aspects influencing well-being over time.</span></span>
<span id="cb9-516"><a href="#cb9-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-517"><a href="#cb9-517" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb9-518"><a href="#cb9-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-519"><a href="#cb9-519" aria-hidden="true" tabindex="-1"></a><span class="fu">### How do various factors impact the overall happiness score across different countries over the years?</span></span>
<span id="cb9-520"><a href="#cb9-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-521"><a href="#cb9-521" aria-hidden="true" tabindex="-1"></a>We explore the complex interactions between many elements that affect general well-being in our quest to comprehend happiness on a global scale. We seek to understand how factors, such as economic stability, family support, health, freedom, trust in society, and generosity, affect the overall happiness scores throughout time and in different nations. By enabling users to interact with the data, this exploration reveals the complex connections between these important variables and the pursuit of happiness as a group.</span>
<span id="cb9-522"><a href="#cb9-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-523"><a href="#cb9-523" aria-hidden="true" tabindex="-1"></a>In our pursuit to understand happiness on a global scale, we delve into the intricate interplay of diverse factors that contribute to overall well-being. By examining economic stability, family support, health, freedom, trust in society, and generosity, we aim to discern how these facets influence the overarching happiness scores across different countries and over time. This exploration empowers users to interactively engage with data, unraveling the intricate relationship between these pivotal factors and the collective pursuit&nbsp;of&nbsp;happiness.</span>
<span id="cb9-524"><a href="#cb9-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-525"><a href="#cb9-525" aria-hidden="true" tabindex="-1"></a><span class="fu">## Approach</span></span>
<span id="cb9-526"><a href="#cb9-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-527"><a href="#cb9-527" aria-hidden="true" tabindex="-1"></a>In our interactive Shiny application, we offer users an intuitive platform for dynamic data exploration. Featuring three dropdown menus for the x-axis, y-axis, and country selection (allowing multi-country selection), alongside nine buttons for years spanning from 2015 to 2023, users can precisely pinpoint specific years for analysis. Additionally, a slider facilitates the selection of the number of countries to display.</span>
<span id="cb9-528"><a href="#cb9-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-529"><a href="#cb9-529" aria-hidden="true" tabindex="-1"></a>The heart of the app resides in the 'Plot' tab, where users can select any two factors, including the happiness score, for the x and y axes. Each selection generates a data point on the graph, and upon hovering over these points, Plotly provides detailed insights related to the chosen factors and countries. This setup grants users the power to delve into individual factor analyses and country comparisons, fostering a deeper understanding of the data dynamics.</span>
<span id="cb9-530"><a href="#cb9-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-531"><a href="#cb9-531" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analysis</span></span>
<span id="cb9-532"><a href="#cb9-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-533"><a href="#cb9-533" aria-hidden="true" tabindex="-1"></a>The Happiness Report examining six factors in the year 2019 as an example.</span>
<span id="cb9-534"><a href="#cb9-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-535"><a href="#cb9-535" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Package loadings, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-536"><a href="#cb9-536" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(markdown)</span>
<span id="cb9-537"><a href="#cb9-537" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb9-538"><a href="#cb9-538" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-539"><a href="#cb9-539" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-540"><a href="#cb9-540" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb9-541"><a href="#cb9-541" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb9-542"><a href="#cb9-542" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb9-543"><a href="#cb9-543" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb9-544"><a href="#cb9-544" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb9-545"><a href="#cb9-545" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb9-546"><a href="#cb9-546" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb9-547"><a href="#cb9-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-548"><a href="#cb9-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-549"><a href="#cb9-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Data loading, message=FALSE, warning=FALSE, results='hide', include=FALSE}</span></span>
<span id="cb9-550"><a href="#cb9-550" aria-hidden="true" tabindex="-1"></a>happiness2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2015_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-551"><a href="#cb9-551" aria-hidden="true" tabindex="-1"></a>happiness2016 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2016_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-552"><a href="#cb9-552" aria-hidden="true" tabindex="-1"></a>happiness2017 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2017_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-553"><a href="#cb9-553" aria-hidden="true" tabindex="-1"></a>happiness2018 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2018_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-554"><a href="#cb9-554" aria-hidden="true" tabindex="-1"></a>happiness2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2019_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-555"><a href="#cb9-555" aria-hidden="true" tabindex="-1"></a>happiness2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2020_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-556"><a href="#cb9-556" aria-hidden="true" tabindex="-1"></a>happiness2021 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2021_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-557"><a href="#cb9-557" aria-hidden="true" tabindex="-1"></a>happiness2022 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2022_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-558"><a href="#cb9-558" aria-hidden="true" tabindex="-1"></a>happiness2023 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"happiness_2023_clean.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-559"><a href="#cb9-559" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb9-560"><a href="#cb9-560" aria-hidden="true" tabindex="-1"></a>countries_all <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"countries_aggregated.csv"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-561"><a href="#cb9-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-562"><a href="#cb9-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-563"><a href="#cb9-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Scatter Plot, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-564"><a href="#cb9-564" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> happiness2015) <span class="sc">+</span></span>
<span id="cb9-565"><a href="#cb9-565" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Economy, <span class="at">y =</span> Happiness.Score, </span>
<span id="cb9-566"><a href="#cb9-566" aria-hidden="true" tabindex="-1"></a>                            <span class="at">colour =</span> Region, <span class="at">label =</span> Country), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb9-567"><a href="#cb9-567" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Economy, <span class="at">y =</span> Happiness.Score), </span>
<span id="cb9-568"><a href="#cb9-568" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb9-569"><a href="#cb9-569" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggtitle</span>(<span class="st">"Economy vs Happiness Score"</span>) <span class="sc">+</span></span>
<span id="cb9-570"><a href="#cb9-570" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb9-571"><a href="#cb9-571" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb9-572"><a href="#cb9-572" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-573"><a href="#cb9-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-574"><a href="#cb9-574" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/family.png)</span>{width="1159"}</span>
<span id="cb9-575"><a href="#cb9-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-576"><a href="#cb9-576" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/economy.png)</span>{width="1155"}</span>
<span id="cb9-577"><a href="#cb9-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-578"><a href="#cb9-578" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/freedom.png)</span>{width="1148"}</span>
<span id="cb9-579"><a href="#cb9-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-580"><a href="#cb9-580" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/generosity.png)</span>{width="1167"}</span>
<span id="cb9-581"><a href="#cb9-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-582"><a href="#cb9-582" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/health.png)</span>{width="1164"}</span>
<span id="cb9-583"><a href="#cb9-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-584"><a href="#cb9-584" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/corruption.png)</span>{width="1169"}</span>
<span id="cb9-585"><a href="#cb9-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-586"><a href="#cb9-586" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion</span></span>
<span id="cb9-587"><a href="#cb9-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-588"><a href="#cb9-588" aria-hidden="true" tabindex="-1"></a>Across the temporal spectrum from 2015 to 2023, our observation between Family (social support) and Happiness Score revealed intriguing insights. Initially, higher degrees of family support aligned with notably higher happiness scores. Subsequently, while the scores remained elevated, both the number of instances and the degree of family support slightly decreased. However, a resurgence followed, mirroring the initial phase's trend before experiencing a slight decline towards the end. Overall, this analysis underscores a proportional relationship, emphasizing that increased family support correlates positively with higher happiness scores---a compelling testament to its pivotal role as a contributing factor in fostering well-being.</span>
<span id="cb9-589"><a href="#cb9-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-590"><a href="#cb9-590" aria-hidden="true" tabindex="-1"></a>The correlation between health and happiness scores appears relatively consistent from 2015 to 2023, showing limited variations. Western European countries consistently maintain top positions, while Sub-Saharan African nations consistently rank at the bottom in this regard. Over the years, a clear pattern emerged: as the economy (GDP per capita) grew, so did happiness scores. Though the intensity varied, the trend remained consistent. In 2022, this link intensified, indicating a proportional relationship between a thriving economy and higher happiness.</span>
<span id="cb9-591"><a href="#cb9-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-592"><a href="#cb9-592" aria-hidden="true" tabindex="-1"></a>When comparing Trust (government corruption) and Happiness Score across countries, intriguing trends emerged. Western European nations like Finland, Denmark, Switzerland, and Sweden showed higher corruption levels but sustained higher happiness. Conversely, countries like New Zealand, Singapore, and Qatar followed a similar pattern. Rwanda depicted the highest corruption and lowest happiness, while Sub-Saharan and some Eastern European nations showcased lower corruption but also lower happiness levels overall.</span>
<span id="cb9-593"><a href="#cb9-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-594"><a href="#cb9-594" aria-hidden="true" tabindex="-1"></a>Upon analyzing the relationship between happiness scores and freedom, it's evident that since 2019, Afghanistan consistently exhibits the lowest happiness score. Meanwhile, the Western European region consistently maintains a top-ranking position in happiness scores from 2015 to 2023. When examining the correlation between happiness scores and generosity, it becomes evident that Finland consistently secures the top position throughout the years 2015 to 2023 in terms of happiness scores.</span>
<span id="cb9-595"><a href="#cb9-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-596"><a href="#cb9-596" aria-hidden="true" tabindex="-1"></a><span class="fu"># Question 2: Patterns of change in happiness scores related to global events.</span></span>
<span id="cb9-597"><a href="#cb9-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-598"><a href="#cb9-598" aria-hidden="true" tabindex="-1"></a>From 2015 to 2023, a series of major global events significantly impacted the happiness scores of various countries. These events, ranging from economic crises to geopolitical conflicts and health emergencies, have caused notable fluctuations in global happiness levels. In this brief introduction, we will list some of these key events and identify the countries most affected by them.</span>
<span id="cb9-599"><a href="#cb9-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-600"><a href="#cb9-600" aria-hidden="true" tabindex="-1"></a><span class="fu">## Major Events Affecting Happiness Scores (2015-2023):</span></span>
<span id="cb9-601"><a href="#cb9-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-602"><a href="#cb9-602" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Data Manipulations, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-603"><a href="#cb9-603" aria-hidden="true" tabindex="-1"></a>covid_years_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb9-604"><a href="#cb9-604" aria-hidden="true" tabindex="-1"></a>    happiness2015 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2015</span>),</span>
<span id="cb9-605"><a href="#cb9-605" aria-hidden="true" tabindex="-1"></a>    happiness2016 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2016</span>),</span>
<span id="cb9-606"><a href="#cb9-606" aria-hidden="true" tabindex="-1"></a>    happiness2017 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2017</span>),</span>
<span id="cb9-607"><a href="#cb9-607" aria-hidden="true" tabindex="-1"></a>    happiness2018<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2018</span>),</span>
<span id="cb9-608"><a href="#cb9-608" aria-hidden="true" tabindex="-1"></a>    happiness2019<span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2019</span>),</span>
<span id="cb9-609"><a href="#cb9-609" aria-hidden="true" tabindex="-1"></a>    happiness2020 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2020</span>),</span>
<span id="cb9-610"><a href="#cb9-610" aria-hidden="true" tabindex="-1"></a>    happiness2021 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2021</span>),</span>
<span id="cb9-611"><a href="#cb9-611" aria-hidden="true" tabindex="-1"></a>    happiness2022 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2022</span>),</span>
<span id="cb9-612"><a href="#cb9-612" aria-hidden="true" tabindex="-1"></a>    happiness2023 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2023</span>)</span>
<span id="cb9-613"><a href="#cb9-613" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-614"><a href="#cb9-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-615"><a href="#cb9-615" aria-hidden="true" tabindex="-1"></a>filtered_covid_data <span class="ot">&lt;-</span> covid_years_data <span class="sc">%&gt;%</span></span>
<span id="cb9-616"><a href="#cb9-616" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"United States"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-617"><a href="#cb9-617" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(Year, Country) <span class="sc">%&gt;%</span></span>
<span id="cb9-618"><a href="#cb9-618" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb9-619"><a href="#cb9-619" aria-hidden="true" tabindex="-1"></a>      <span class="co">#slice_head(n = input$num_countries) %&gt;%</span></span>
<span id="cb9-620"><a href="#cb9-620" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb9-621"><a href="#cb9-621" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-622"><a href="#cb9-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-623"><a href="#cb9-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Trend Time Series Plot, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-624"><a href="#cb9-624" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> filtered_covid_data, <span class="at">x =</span> <span class="sc">~</span>Year, <span class="at">y =</span> <span class="sc">~</span>Happiness.Rank, </span>
<span id="cb9-625"><a href="#cb9-625" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>Region, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb9-626"><a href="#cb9-626" aria-hidden="true" tabindex="-1"></a>        <span class="at">hoverinfo =</span> <span class="st">'text'</span>,</span>
<span id="cb9-627"><a href="#cb9-627" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">"Country:"</span>, Country, <span class="st">"&lt;br&gt;Year:"</span>, </span>
<span id="cb9-628"><a href="#cb9-628" aria-hidden="true" tabindex="-1"></a>                      Year, <span class="st">"&lt;br&gt;Happiness Rank:"</span>, </span>
<span id="cb9-629"><a href="#cb9-629" aria-hidden="true" tabindex="-1"></a>                      Happiness.Rank)) <span class="sc">%&gt;%</span></span>
<span id="cb9-630"><a href="#cb9-630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">"Happiness Rank Trends"</span>),</span>
<span id="cb9-631"><a href="#cb9-631" aria-hidden="true" tabindex="-1"></a>         <span class="at">margin =</span> <span class="fu">list</span>(<span class="at">t =</span> <span class="dv">50</span>),</span>
<span id="cb9-632"><a href="#cb9-632" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Year'</span>, <span class="at">tickvals =</span> <span class="fu">c</span>(<span class="st">'2015'</span>,<span class="st">'2016'</span>,</span>
<span id="cb9-633"><a href="#cb9-633" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2017'</span>,<span class="st">'2018'</span>,</span>
<span id="cb9-634"><a href="#cb9-634" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2019'</span>,<span class="st">'2020'</span>, </span>
<span id="cb9-635"><a href="#cb9-635" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2021'</span>, <span class="st">'2022'</span>, </span>
<span id="cb9-636"><a href="#cb9-636" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">'2023'</span>),</span>
<span id="cb9-637"><a href="#cb9-637" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ticktext =</span> <span class="fu">c</span>(<span class="st">'2015'</span>,<span class="st">'2016'</span>,<span class="st">'2017'</span>,</span>
<span id="cb9-638"><a href="#cb9-638" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">'2018'</span>,<span class="st">'2019'</span>,<span class="st">'2020'</span>, </span>
<span id="cb9-639"><a href="#cb9-639" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">'2021'</span>, <span class="st">'2022'</span>, <span class="st">'2023'</span>)),</span>
<span id="cb9-640"><a href="#cb9-640" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">'Happiness Score'</span>),</span>
<span id="cb9-641"><a href="#cb9-641" aria-hidden="true" tabindex="-1"></a>         <span class="at">hovermode =</span> <span class="st">'closest'</span>)</span>
<span id="cb9-642"><a href="#cb9-642" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-643"><a href="#cb9-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-644"><a href="#cb9-644" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2016 Brexit Vote:</span></span>
<span id="cb9-645"><a href="#cb9-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-646"><a href="#cb9-646" aria-hidden="true" tabindex="-1"></a>The United Kingdom experienced political and economic uncertainty, affecting its happiness scores, as well as indirect impacts on EU member states.</span>
<span id="cb9-647"><a href="#cb9-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-648"><a href="#cb9-648" aria-hidden="true" tabindex="-1"></a><span class="al">![Brexit Vote affecting happiness score in UK](images/Uk_2016.png)</span>{fig-align="center" width="521"}</span>
<span id="cb9-649"><a href="#cb9-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-650"><a href="#cb9-650" aria-hidden="true" tabindex="-1"></a>In 2016, the graph shows that the happiness rank for the United Kingdom increased, indicating a decrease in happiness. This is likely due to the uncertainty and division caused by the Brexit vote, as it introduced concerns about the UK's economic future and its citizens' identity within Europe. Such socio-political events typically create anxiety and can negatively impact the overall mood of the nation.</span>
<span id="cb9-651"><a href="#cb9-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-652"><a href="#cb9-652" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2017-2018 US-China Trade War:</span></span>
<span id="cb9-653"><a href="#cb9-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-654"><a href="#cb9-654" aria-hidden="true" tabindex="-1"></a>Led to economic repercussions in the United States and China, as well as in countries with strong trade ties to these nations.</span>
<span id="cb9-655"><a href="#cb9-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-656"><a href="#cb9-656" aria-hidden="true" tabindex="-1"></a><span class="al">![US_China Trade War](images/china,%20US%20trade%20war.png)</span>{fig-align="center" width="521"}</span>
<span id="cb9-657"><a href="#cb9-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-658"><a href="#cb9-658" aria-hidden="true" tabindex="-1"></a>The 2017-2018 US-China trade war had a significant impact on the happiness ranks of both countries. It led to economic uncertainties, job losses, and disrupted trade, which can contribute to decreased happiness among the population. The trade war also affected global economic stability, indirectly influencing happiness ranks in other nations closely tied to the US-China trade relationship.</span>
<span id="cb9-659"><a href="#cb9-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-660"><a href="#cb9-660" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2019-2023 COVID-19 Pandemic:</span></span>
<span id="cb9-661"><a href="#cb9-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-662"><a href="#cb9-662" aria-hidden="true" tabindex="-1"></a>Globally affected all countries, with significant impacts on mental health, economic stability, and overall happiness. Countries like Italy, Spain, the United States, Brazil, and India were among the hardest hit due to high infection and mortality rates.</span>
<span id="cb9-663"><a href="#cb9-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-664"><a href="#cb9-664" aria-hidden="true" tabindex="-1"></a><span class="al">![Covid-19 effect on happiness rank](images/covid_19_updated.png)</span>{fig-align="center" width="512"}</span>
<span id="cb9-665"><a href="#cb9-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-666"><a href="#cb9-666" aria-hidden="true" tabindex="-1"></a>The graph indicates a general increase in happiness rank for most regions during the COVID-19 pandemic, suggesting a decline in happiness. Some regions show recovery post-pandemic, while others continue to experience lower happiness levels, with varying impacts across different parts of the world. india, china, Usa</span>
<span id="cb9-667"><a href="#cb9-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-668"><a href="#cb9-668" aria-hidden="true" tabindex="-1"></a><span class="fu">### 2022 Pakistan Floods:</span></span>
<span id="cb9-669"><a href="#cb9-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-670"><a href="#cb9-670" aria-hidden="true" tabindex="-1"></a>Heavy monsoon rains led to catastrophic flooding in Pakistan, causing massive displacement and damage to infrastructure and potentially affecting the happiness rank.</span>
<span id="cb9-671"><a href="#cb9-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-672"><a href="#cb9-672" aria-hidden="true" tabindex="-1"></a><span class="al">![Pakistan floods affecting happiness rank](images/pakistan.png)</span>{fig-align="center" width="512"}</span>
<span id="cb9-673"><a href="#cb9-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-674"><a href="#cb9-674" aria-hidden="true" tabindex="-1"></a>In 2022, Pakistan experienced a significant increase in its happiness rank, signifying a decrease in happiness. This was likely influenced by catastrophic flooding caused by heavy monsoon rains, resulting in displacement and infrastructure damage, which typically lowers overall happiness.</span>
<span id="cb9-675"><a href="#cb9-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-676"><a href="#cb9-676" aria-hidden="true" tabindex="-1"></a><span class="fu">## Miscellaneous Plots:</span></span>
<span id="cb9-677"><a href="#cb9-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-678"><a href="#cb9-678" aria-hidden="true" tabindex="-1"></a><span class="fu">### World Heatmap:</span></span>
<span id="cb9-679"><a href="#cb9-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-680"><a href="#cb9-680" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Heatmap, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-681"><a href="#cb9-681" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> </span>
<span id="cb9-682"><a href="#cb9-682" aria-hidden="true" tabindex="-1"></a>      <span class="fu">left_join</span>(happiness2015, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"Country"</span>))</span>
<span id="cb9-683"><a href="#cb9-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-684"><a href="#cb9-684" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> world) <span class="sc">+</span></span>
<span id="cb9-685"><a href="#cb9-685" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Happiness.Score, <span class="at">geometry =</span> geometry), <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb9-686"><a href="#cb9-686" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb9-687"><a href="#cb9-687" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-688"><a href="#cb9-688" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Happiness Score"</span>, <span class="at">title =</span> <span class="st">"World Happiness Map 2015"</span>)</span>
<span id="cb9-689"><a href="#cb9-689" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-690"><a href="#cb9-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-691"><a href="#cb9-691" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trend Comparison:</span></span>
<span id="cb9-692"><a href="#cb9-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-693"><a href="#cb9-693" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Data Filtering, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-694"><a href="#cb9-694" aria-hidden="true" tabindex="-1"></a>filtered_trend <span class="ot">&lt;-</span> covid_years_data <span class="sc">|&gt;</span> </span>
<span id="cb9-695"><a href="#cb9-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"India"</span>, <span class="st">"China"</span>, <span class="st">"United States"</span>))</span>
<span id="cb9-696"><a href="#cb9-696" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-697"><a href="#cb9-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-698"><a href="#cb9-698" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Trend Comparison, message=FALSE, warning=FALSE, results='hide'}</span></span>
<span id="cb9-699"><a href="#cb9-699" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(filtered_trend, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Economy, <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb9-700"><a href="#cb9-700" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb9-701"><a href="#cb9-701" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-702"><a href="#cb9-702" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">unique</span>(filtered_trend<span class="sc">$</span>Year)) <span class="sc">+</span></span>
<span id="cb9-703"><a href="#cb9-703" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-704"><a href="#cb9-704" aria-hidden="true" tabindex="-1"></a>      <span class="co">#theme(legend.position = "none") +</span></span>
<span id="cb9-705"><a href="#cb9-705" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series Plot of Economy"</span>)</span>
<span id="cb9-706"><a href="#cb9-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-707"><a href="#cb9-707" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(filtered_trend, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Happiness.Score, </span>
<span id="cb9-708"><a href="#cb9-708" aria-hidden="true" tabindex="-1"></a>                                <span class="at">color =</span> Country)) <span class="sc">+</span></span>
<span id="cb9-709"><a href="#cb9-709" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb9-710"><a href="#cb9-710" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-711"><a href="#cb9-711" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">unique</span>(filtered_trend<span class="sc">$</span>Year)) <span class="sc">+</span> </span>
<span id="cb9-712"><a href="#cb9-712" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb9-713"><a href="#cb9-713" aria-hidden="true" tabindex="-1"></a>      <span class="co">#theme(legend.position = "none") +</span></span>
<span id="cb9-714"><a href="#cb9-714" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series of Happiness Score"</span>)</span>
<span id="cb9-715"><a href="#cb9-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-716"><a href="#cb9-716" aria-hidden="true" tabindex="-1"></a>(p<span class="sc">|</span>q) <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">guides =</span> <span class="st">"collect"</span>) <span class="sc">&amp;</span></span>
<span id="cb9-717"><a href="#cb9-717" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb9-718"><a href="#cb9-718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb9-719"><a href="#cb9-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-720"><a href="#cb9-720" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb9-721"><a href="#cb9-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-722"><a href="#cb9-722" aria-hidden="true" tabindex="-1"></a>This World Happiness Shiny Application is not just a tool for data exploration, it is a window into the diverse and dynamic nature of global well-being. It serves as a valuable resource for researchers, policymakers, educators, and anyone interested in the study of happiness. By offering user-driven, interactive data analysis, it empowers users to uncover the complex tapestry of factors that contribute to a happier and more fulfilling global society.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>