<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Plot Pioneers - World Happiness report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Plot Pioneers</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./proposal.html" rel="" target="" aria-current="page">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html" rel="" target="">
 <span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/INFO526-DataViz/project-01" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#high-level-goal" id="toc-high-level-goal" class="nav-link active" data-scroll-target="#high-level-goal">High-level Goal</a></li>
  <li><a href="#goal" id="toc-goal" class="nav-link" data-scroll-target="#goal">Goal</a></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">Dataset</a>
  <ul class="collapse">
  <li><a href="#dataset-description" id="toc-dataset-description" class="nav-link" data-scroll-target="#dataset-description">Dataset Description</a></li>
  <li><a href="#dimensions" id="toc-dimensions" class="nav-link" data-scroll-target="#dimensions">Dimensions</a></li>
  <li><a href="#reason-for-choosing-this-dataset" id="toc-reason-for-choosing-this-dataset" class="nav-link" data-scroll-target="#reason-for-choosing-this-dataset">Reason for Choosing this Dataset</a></li>
  <li><a href="#cleaned-dataset-for-all-years2015-2023" id="toc-cleaned-dataset-for-all-years2015-2023" class="nav-link" data-scroll-target="#cleaned-dataset-for-all-years2015-2023">Cleaned Dataset for all Years(2015-2023)</a></li>
  </ul></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions</a></li>
  <li><a href="#analysis-plan" id="toc-analysis-plan" class="nav-link" data-scroll-target="#analysis-plan">Analysis plan</a></li>
  <li><a href="#plan-of-attack" id="toc-plan-of-attack" class="nav-link" data-scroll-target="#plan-of-attack">Plan of Attack</a></li>
  <li><a href="#repo-organisation" id="toc-repo-organisation" class="nav-link" data-scroll-target="#repo-organisation">Repo Organisation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">World Happiness report</h1>
<p class="subtitle lead">A Journey through World Happiness:)</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="high-level-goal" class="level2">
<h2 class="anchored" data-anchor-id="high-level-goal">High-level Goal</h2>
</section>
<section id="goal" class="level2">
<h2 class="anchored" data-anchor-id="goal">Goal</h2>
</section>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>“Are you happy?” Despite being a straightforward question, philosophers, artists, and scientists have been captivated by it for millennia. We take a wonderful tour through the World Happiness Report dataset in our quest to discover what makes people truly happy around the world. This proposal describes how we want to investigate and examine this interesting dataset, which runs from 2015 to 2023. This project attempts to solve the puzzles of happiness in a playful and interesting way. Happiness is a universal quest.</p>
</section>
<section id="dataset" class="level2">
<h2 class="anchored" data-anchor-id="dataset">Dataset</h2>
<section id="dataset-description" class="level3">
<h3 class="anchored" data-anchor-id="dataset-description">Dataset Description</h3>
<p>We are excited to embark on a journey to explore the <a href="https://worldhappiness.report/data/">World Happiness Report dataset</a>, encompassing the years 2015 to 2023. This engaging and illuminating dataset offers a unique glimpse into the factors influencing global happiness and well-being. Let’s dive into the details of our chosen dataset:</p>
<p>The World Happiness Report dataset is sourced directly from the official <a href="https://worldhappiness.report/">World Happiness Report website</a>. This esteemed report is published annually by the United Nations, offering insights into the state of happiness and well-being across countries. The dataset is meticulously compiled, verified, and updated each year, making it a reliable source for our analysis.</p>
</section>
<section id="dimensions" class="level3">
<h3 class="anchored" data-anchor-id="dimensions">Dimensions</h3>
<p>Multiple annual observations, varying from 149 to 158 countries per year.</p>
<p>Common variables across dataset:</p>
<p><strong>Country:</strong></p>
<p>Data Type: Character (chr)</p>
<p>Description: The name of the country for which the happiness metrics are recorded.</p>
<p><strong>Happiness Rank:</strong></p>
<p>Data Type: Integer (int)</p>
<p>Description: The rank of the country is based on its happiness score.</p>
<p><strong>Happiness Score:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: The score that quantifies the happiness level, is based on various factors such as GDP per capita, social support, life expectancy, freedom to make life choices, generosity, and perceptions of corruption.</p>
<p><strong>GDP per Capita:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: A measure of the country’s economic output that accounts for its population.</p>
<p><strong>Family:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: The degree to which social support is provided in the country, reflecting family ties or community support.</p>
<p><strong>Health (Life Expectancy):</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: Average life expectancy in the country, indicating the overall health of the population.</p>
<p><strong>Freedom:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: The level of freedom citizens have to make life choices in the country.</p>
<p><strong>Trust (Government Corruption):</strong></p>
<p>Data Type: Double (dbl)&nbsp;</p>
<p>Description: The level of trust in the country’s government and the perceived amount of corruption.</p>
<p><strong>Generosity:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: The average level of generosity of the country’s citizens.</p>
<p><strong>Dystopia Residual:</strong></p>
<p>Data Type: Double (dbl)</p>
<p>Description: A hypothetical measure that accounts for the unexplained components of happiness from the six factors evaluated.</p>
</section>
<section id="reason-for-choosing-this-dataset" class="level3">
<h3 class="anchored" data-anchor-id="reason-for-choosing-this-dataset">Reason for Choosing this Dataset</h3>
<p>The World Happiness Report dataset offers a perfect blend of intriguing questions and meaningful insights. By exploring this dataset, we aim to understand the factors that contribute to happiness and well-being across diverse societies. Furthermore, we chose this dataset for the following reasons:</p>
<p>1. Global Relevance: Happiness is a fundamental aspect of human well-being, and this dataset provides a unique perspective on happiness trends worldwide. Our analysis can offer insights into what makes societies and individuals happy, transcending borders and cultures.</p>
<p>2. Temporal Insights: The dataset covers a wide range of years, enabling us to track happiness trends and identify potential causative factors over time. This temporal dimension adds depth to our analysis.</p>
</section>
<section id="cleaned-dataset-for-all-years2015-2023" class="level3">
<h3 class="anchored" data-anchor-id="cleaned-dataset-for-all-years2015-2023">Cleaned Dataset for all Years(2015-2023)</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,368
Columns: 11
$ Country                         &lt;chr&gt; "Switzerland", "Iceland", "Denmark", "…
$ `Happiness Rank`                &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,…
$ `Happiness Score`               &lt;dbl&gt; 7.587, 7.561, 7.527, 7.522, 7.427, 7.4…
$ `GDP per Capita`                &lt;dbl&gt; 1.39651, 1.30232, 1.32548, 1.45900, 1.…
$ Family                          &lt;dbl&gt; 1.34951, 1.40223, 1.36058, 1.33095, 1.…
$ `Health (Life Expectancy)`      &lt;dbl&gt; 0.94143, 0.94784, 0.87464, 0.88521, 0.…
$ Freedom                         &lt;dbl&gt; 0.66557, 0.62877, 0.64938, 0.66973, 0.…
$ `Trust (Government Corruption)` &lt;dbl&gt; 0.41978, 0.14145, 0.48357, 0.36503, 0.…
$ Generosity                      &lt;dbl&gt; 0.29678, 0.43630, 0.34139, 0.34699, 0.…
$ `Dystopia Residual`             &lt;dbl&gt; 2.51738, 2.70201, 2.49204, 2.46531, 2.…
$ Year                            &lt;dbl&gt; 2015, 2015, 2015, 2015, 2015, 2015, 20…</code></pre>
</div>
</div>
</section>
</section>
<section id="questions" class="level2">
<h2 class="anchored" data-anchor-id="questions">Questions</h2>
<ol type="1">
<li>How do various factors contribute to the overall happiness score across different countries over the years?</li>
<li></li>
</ol>
</section>
<section id="analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="analysis-plan">Analysis plan</h2>
<ul>
<li><p><strong>Approach for Question 1</strong></p>
<p>The different factors involved are as follows : economy (“GDP per capita”), family (“social support”), health(“healthy life expectancy at birth”), freedom (“freedom to make life choices”), trust(“perceptions of corruption”) and genorosity (“genorosity”).</p>
<p>To explore how various factors contribute to the overall happiness score across different countries over the years, we have designed an interactive analysis where users can select a specific year and country from drop-down menus, allowing for a dynamic and personalized exploration of the data. We are planning to create a bar chart where the x-axis represents the factors (independent variables), and the y-axis represents their contribution to the overall happiness score. For better visulaization we are planning to choose a Grouped Bar chart, where separate bars represents each factor, and their heights represent their contributions to the overall happiness score. This chart provides a side-by-side comparison of each factor’s contribution. We are planning to expand the analysis by incorporating a stacked bar plot to gain more comprehensive visualization.</p></li>
</ul>
</section>
<section id="plan-of-attack" class="level2">
<h2 class="anchored" data-anchor-id="plan-of-attack">Plan of Attack</h2>
<section id="week-1-oct-16---oct-22-everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-1-oct-16---oct-22-everyone">Week 1: (Oct 16 - Oct 22) [Everyone]</h4>
</section>
<section id="data-selection-and-initial-planning" class="level4">
<h4 class="anchored" data-anchor-id="data-selection-and-initial-planning"><em>Data Selection and Initial Planning</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Identify and download the World Happiness Report dataset.</li>
<li>Clean and preprocess the data, removing any inconsistencies or missing values.</li>
<li>Familiarizing with the dataset’s structure and variables.</li>
<li>Analysing more on the specific questions we want to address and the visualizations.</li>
<li>Begin designing a rough sketch of the shiny app’s layout.</li>
</ul></li>
</ul>
</section>
<section id="week-2-oct-23---oct-29everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-2-oct-23---oct-29everyone">Week 2: (Oct 23 - Oct 29)[Everyone]</h4>
</section>
<section id="proposal-writing" class="level4">
<h4 class="anchored" data-anchor-id="proposal-writing"><em>Proposal Writing</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Write a project proposal that includes the project’s goals, objectives, and scope.</li>
<li>Define the questions you aim to answer with the shiny application.</li>
<li>Outline the design and interactivity features we plan to include.</li>
<li>Create a project timeline with specific milestones.</li>
</ul></li>
</ul>
</section>
<section id="week-3-oct-30---nov-5-everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-3-oct-30---nov-5-everyone">Week 3: (Oct 30 - Nov 5) [Everyone]</h4>
</section>
<section id="data-exploration-and-visualization-planning" class="level4">
<h4 class="anchored" data-anchor-id="data-exploration-and-visualization-planning"><em>Data Exploration and Visualization Planning</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Conduct exploratory data analysis (EDA) to understand the dataset better.</li>
<li>Identify interesting patterns, correlations, or outliers in the data.</li>
<li>Sketch initial ideas for the app’s layout and visualizations.</li>
</ul></li>
</ul>
</section>
<section id="week-4-nov-6---nov-12-everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-4-nov-6---nov-12-everyone">Week 4: (Nov 6 - Nov 12) [Everyone]</h4>
</section>
<section id="shiny-application-layout-designing" class="level4">
<h4 class="anchored" data-anchor-id="shiny-application-layout-designing"><em>Shiny Application Layout Designing</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Select the tools and libraries to be used for creating the app.</li>
<li>Plan the layout, including the placement of plots, widgets, and navigation.</li>
<li>Create a wireframe for user interface.</li>
</ul></li>
</ul>
</section>
<section id="week-5-nov-13---nov-19-tbd" class="level4">
<h4 class="anchored" data-anchor-id="week-5-nov-13---nov-19-tbd">Week 5: (Nov 13 - Nov 19) [TBD]</h4>
</section>
<section id="plot-creation" class="level4">
<h4 class="anchored" data-anchor-id="plot-creation"><em>Plot Creation</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Develop the plots and interactive components.</li>
<li>Ensure that the plots represent the data accurately and are visually appealing.</li>
<li>Initial integration of interactive elements into the shiny app.</li>
</ul></li>
</ul>
</section>
<section id="week-6-nov-20---nov-26-tbd" class="level4">
<h4 class="anchored" data-anchor-id="week-6-nov-20---nov-26-tbd">Week 6: (Nov 20 - Nov 26) [TBD]</h4>
</section>
<section id="shiny-app-development-and-refinement" class="level4">
<h4 class="anchored" data-anchor-id="shiny-app-development-and-refinement"><em>Shiny App Development and Refinement</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Code the functionality of the app using Shiny’s reactive elements.</li>
<li>Implement interactivity features like dropdowns and filters.</li>
<li>Test the app’s performance and user experience.</li>
</ul></li>
</ul>
</section>
<section id="week-7-nov-27---dec-3-everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-7-nov-27---dec-3-everyone">Week 7: (Nov 27 - Dec 3) [Everyone]</h4>
</section>
<section id="testing-and-modifications" class="level4">
<h4 class="anchored" data-anchor-id="testing-and-modifications"><em>Testing and Modifications</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Conduct testing to identify and fix any bugs or issues.</li>
<li>Gather feedback.</li>
<li>Make improvements based on the feedback received.</li>
</ul></li>
</ul>
</section>
<section id="week-8-dec-4---dec11-everyone" class="level4">
<h4 class="anchored" data-anchor-id="week-8-dec-4---dec11-everyone">Week 8: (Dec 4 - Dec11) [Everyone]</h4>
</section>
<section id="finalization-and-presentation" class="level4">
<h4 class="anchored" data-anchor-id="finalization-and-presentation"><em>Finalization and Presentation</em></h4>
<ul>
<li><em>Tasks:</em>
<ul>
<li>Make any final refinements to the application.</li>
<li>Complete the write-up or documentation.</li>
<li>Prepare a presentation for the project.</li>
</ul></li>
</ul>
</section>
</section>
<section id="repo-organisation" class="level2">
<h2 class="anchored" data-anchor-id="repo-organisation">Repo Organisation</h2>
<ol type="1">
<li>‘_extra/’: Serves as a repository for informal materials, notes, experimental content, and other items not directly related to the project but retained for potential future reference, without undergoing formal review or grading.</li>
<li>‘_freeze/’: Reserved for storing generated files during the build process, representing the static state of the website at a specific point in time.</li>
<li>‘_site/’: Used to contain the static website files generated after processing the quarto document.</li>
<li>‘.github/’: Folder for organizing GitHub templates and workflows.</li>
<li>‘data/’: Reserved for storing essential data files used in the project, such as input csv files.</li>
<li>‘images/’: Dedicated to housing image files utilized within the project or generated images.</li>
<li>‘presentation_files/’: Designated folder for managing files related to presentations.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>